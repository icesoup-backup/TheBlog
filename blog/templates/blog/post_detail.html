{% extends 'base.html' %}
{% load crispy_forms_tags %}
{title: 'Detail'}

{% block content %}

<div class="card m-5" style="background-color: #202020; color: #FFFFFF;">
    <div class="card-body">
      <h5 class="card-title">{{ post.title }}</h5>
      <p class=" text-muted">{{ post.author }} | {{ post.createdOn }}</p>
      <p class="card-text ">{{ post.content | safe }}</p>
      {% if post.author == user %}
      <a href="{% url 'edit' post.slug %}" class="btn btn-outline-light">Edit</a>
      <a href="{% url 'delete' post.slug %}" class="btn btn-outline-danger">Delete</a>
      {% endif %}
    </div>
</div>

<div class="card m-5" style="background-color: #202020; color: #FFFFFF;">
  <div class="card-body">
    <h4 class="card-title text-center">Comments</h4>
    {% for comment in comments %}
    <p class="card-title">{{ comment.name }}</p>
    <p class=" text-muted">{{ comment.createdOn }}</p>
    <p class="card-text">{{ comment.body | linebreaks }}</p>
    {% endfor %}
  </div>
</div>

<div class="card m-5" style="background-color: #202020; color: #FFFFFF;">
  <div class="card-body">
    {% if user.is_authenticated %}
      {% if new_comment %}
      <div class="alert alert-success" role="alert">
        Your comment is awaiting moderation
      </div>
      {% else %}
      <h5 class="card-title">Leave Comment</h5>
      <form method="post" style="margin-top: 1.3em;">
        {{ comment_form | crispy }}
        {% csrf_token %}
        <br>
        <button type="submit" class="btn btn-outline-light">Submit</button>
      </form> 
      {% endif %}
    {% else %}
    <div class="alert alert-danger" role="alert">
      Login to post a comment
    </div>    
    {% endif %}

  </div>
</div>

{% endblock content %}
